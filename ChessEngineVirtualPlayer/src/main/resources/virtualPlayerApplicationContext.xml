<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-4.1.xsd">

    <alias name="defaultChessBoardService" alias="friendlyChessBoardService"/>
    <bean id="defaultChessBoardService" class="com.davidbalazs.chess.services.impl.DefaultFriendlyChessBoardService">
        <property name="moveService" ref="moveService"/>
    </bean>


    <alias name="defaultMoveService" alias="moveService"/>
    <bean id="defaultMoveService" class="com.davidbalazs.chess.services.impl.DefaultMoveService"/>

    <alias name="defaultKingService" alias="kingService"/>
    <bean id="defaultKingService" class="com.davidbalazs.chess.services.impl.DefaultKingService">
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
        <property name="possibleMovesGenerator" ref="possibleMovesGenerator"/>
        <property name="pseudoLegalMovesGenerator" ref="pseudoLegalMovesGenerator"/>
    </bean>

    <alias name="defaultPossibleMovesGenerator" alias="possibleMovesGenerator"/>
    <bean id="defaultPossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.MainPossibleMovesGenerator">
        <property name="possibleMoveGenerators">
            <list>
                <ref bean="pawnPossibleMoveGenerator"/>
                <ref bean="knightPossibleMovesGenerator"/>
                <ref bean="rookPossibleMovesGenerator"/>
                <ref bean="kingPossibleMovesGenerator"/>
                <ref bean="bishopPossibleMovesGenerator"/>
                <ref bean="queenPossibleMovesGenerator"/>
            </list>
        </property>
    </bean>

    <bean id="pawnPossibleMoveGenerator" class="com.davidbalazs.chess.movegenerator.impl.PawnPossibleMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
        <property name="moveService" ref="moveService"/>
        <property name="kingService" ref="kingService"/>
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
    </bean>

    <bean id="knightPossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.KnightPossibleMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
        <property name="moveService" ref="moveService"/>
        <property name="kingService" ref="kingService"/>
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
    </bean>

    <!--this should not be added directly to mainPossibleMovesGenerator, because it is a generic piece type. It should be used by rook and by queen move generators.-->
    <bean id="lineSlidingPiecePossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.LineSlidingPiecePossibleMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
        <property name="kingService" ref="kingService"/>
        <property name="moveService" ref="moveService"/>
    </bean>

    <!--this should not be added directly to mainPossibleMovesGenerator, because it is a generic piece type. It should be used by rook and by queen move generators.-->
    <bean id="diagonalSlidingPiecePossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.DiagonalSlidingPiecePossibleMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
        <property name="kingService" ref="kingService"/>
        <property name="moveService" ref="moveService"/>
    </bean>

    <bean id="bishopPossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.BishopPossibleMovesGenerator">
        <property name="diagonalSlidingPiecePossibleMovesGenerator" ref="diagonalSlidingPiecePossibleMovesGenerator"/>
    </bean>

    <bean id="rookPossibleMovesGenerator" class="com.davidbalazs.chess.movegenerator.impl.RookPossibleMovesGenerator">
        <property name="lineSlidingPiecePossibleMovesGenerator" ref="lineSlidingPiecePossibleMovesGenerator"/>
    </bean>

    <bean id="queenPossibleMovesGenerator" class="com.davidbalazs.chess.movegenerator.impl.QueenPossibleMovesGenerator">
        <property name="lineSlidingPiecePossibleMovesGenerator" ref="lineSlidingPiecePossibleMovesGenerator"/>
        <property name="diagonalSlidingPiecePossibleMovesGenerator" ref="diagonalSlidingPiecePossibleMovesGenerator"/>
    </bean>

    <bean id="kingPossibleMovesGenerator"
          class="com.davidbalazs.chess.movegenerator.impl.KingPossibleMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
        <property name="moveService" ref="moveService"/>
        <property name="pseudoLegalMovesGenerator" ref="pseudoLegalMovesGenerator"/>
    </bean>

    <alias name="mainPseudoLegalMovesGenerator" alias="pseudoLegalMovesGenerator"/>
    <bean id="mainPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.MainPseudoLegalMovesGenerator">
        <property name="pseudoLegalMovesGeneratorList">
            <list>
                <ref bean="rookPseudoLegalMovesGenerator"/>
                <ref bean="knightPseudoLegalMovesGenerator"/>
                <ref bean="pawnPseudoLegalMovesGenerator"/>
                <ref bean="bishopPseudoLegalMovesGenerator"/>
                <ref bean="queenPseudoLegalMovesGenerator"/>
            </list>
        </property>
    </bean>

    <bean id="rookPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.RookPseudoLegalMovesGenerator">
        <property name="lineSlidingPseudoLegalMovesGenerator" ref="lineSlidingPseudoLegalMovesGenerator"/>
    </bean>

    <bean id="queenPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.QueenPseudoLegalMovesGenerator">
        <property name="lineSlidingPseudoLegalMovesGenerator" ref="lineSlidingPseudoLegalMovesGenerator"/>
        <property name="diagonalSlidingPseudoLegalMovesGenerator" ref="diagonalSlidingPseudoLegalMovesGenerator"/>
    </bean>

    <bean id="lineSlidingPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.LineSlidingPseudoLegalMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
    </bean>

    <bean id="diagonalSlidingPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.DiagonalSlidingPseudoLegalMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
    </bean>

    <bean id="bishopPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.BishopPseudoLegalMovesGenerator">
        <property name="diagonalSlidingPseudoLegalMovesGenerator" ref="diagonalSlidingPseudoLegalMovesGenerator"/>
    </bean>

    <bean id="knightPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.KnightPseudoLegalMovesGenerator">
        <property name="bitBoardProcessor" ref="bitBoardProcessor"/>
    </bean>

    <bean id="pawnPseudoLegalMovesGenerator"
          class="com.davidbalazs.chess.pseudolegalmoves.impl.PawnPseudoLegalMovesGenerator"/>

    <bean id="bitBoardProcessor" class="com.davidbalazs.chess.processor.BitBoardProcessor"/>

    <alias name="minimaxMoveAlgorithm" alias="moveAlgorithm"/>
    <bean id="minimaxMoveAlgorithm" class="com.davidbalazs.chess.algorithms.impl.MinimaxMoveAlgorithm">
        <property name="moveGenerator" ref="possibleMovesGenerator"/>
        <property name="chessBoardService" ref="friendlyChessBoardService"/>
        <property name="evaluationFunction" ref="evaluationFunction"/>
        <property name="moveService" ref="moveService"/>
    </bean>

    <alias name="defaultEvaluationFunction" alias="evaluationFunction"/>
    <bean id="defaultEvaluationFunction" class="com.davidbalazs.chess.algorithms.impl.DefaultEvaluationFunction"/>

</beans>
